# 1. 데이터 모델링
- 정보 시스템을 구축하기 위한 **데이터 관점**의 업무 분석 기법
- DB를 구축하기 위한 분석/설계의 과정

## 데이터 모델링 절차
1. 요구사항 수집 및 분석
2. 설계
   - 개념적 모델링
   - 논리적 모델링
   - 물리적 모델링
3. 데이터베이스 구현

## 예시 - 게시판
1. 요구사항 분석
  - 게시판 화면에 어떤 것들이 필요한지 분석
2. 개념적 모델링
  - 게시판 화면에 표현되는 데이터를 파악하여 관계 설정
  - 요구사항 분석 결과를 기반으로 중요 Entity를 추출하고 Entity 간 관계를 결정해서 ER Diagram으로 표현
3. 논리적 모델링
  - 개념적 모델이 완성된 후, 구체화된 업무 중심의 데이터 모델링을 만듦
  - 개체에 대한 Key, 속성, 관계 등을 표시하며, 정규화 작업을 진행
4. 물리적 모델링
  - 최종적으로 데이터를 관리할 DB를 선택하고, 실제 테이블을 만드는 작업을 말한다

## 적절한 데이터 타입
- 데이터 유형은 일반적으로 문자/숫자/날짜 형으로 구분
- 같은 문자/숫자에도 다양한 타입이 있으니 **저장 용량/성능**을 고려하여 선택

### VARCHAR
- 가변 길이 타입이기 때문에, 데이터가 주어진 만큼만 공간을 할당함
### CHAR
- 고정 길이타입이기 때문에, 지정한 만큼의 공간을 차지함
### 정수형, 실수향
- DB 서버 공간을 차지하기 때문에 저장공간을 낭비하지 않은 게 중요
- 정수 자료형을 사용할 때에는 예상되는 숫자 사이즈에 맞게 INT 타입 지정
### DATETIME
- 날짜와 시간을 STRING으로 저장
- 어느 지역에서든 같은 시간이 조회
### TIMESTAMP
- DB session의 TIME ZONE을 적용한 날짜와 시간을 INT로 저장
- 각 국가별 시간을 조회할 수 있어, 글로벌 서비스로 운영할 경우에 적합

# 2. DB 정규화
- 동일한 의미의 일반 속성을 하나의 테이블로 집약시킴
- **논리적 모델링** 단계에서 불필요한 데이터의 중복 속성 제거

## DB 정규화 특징
- 테이블 간의 중복된 데이터를 최소화
  - 저장 용량의 최적화 가능
  - 데이터의 무결성 유지
  - 쿼리 내의 Join을 많이 사용하게 되어, 응답 시간 저하를 초래할 수 있음

## 1정규화
- 반복 속성을 제거하고, 새로운 테이블을 추가한 후에 기존 테이블과 1:N 관계 형성
## 2정규화
- 부분적 함수 종속 관계를 분리
- 기본 키가 복합 키로 구성되었을 때, 복합 키 중 일부에 의존적인 열을 제거
## 3정규화
- 기본 키에 종속되지 않고, 일반 열에 의존적인 컬럼이 있다면 이를 제거

## DB 정규화의 단점
- Join 연산이 많아져서, Query 응답 시간이 느려질 수 있다

# 3. DB 반 정규화
- 시스템 성능 향상. 개발 과정의 편의성/운영의 단순화를 위해
- Table/Column/Relationship 레벨로 중복, 통합, 분리 등을 수행하는 작업
- **정규화 이후**에 수행

## DB 반 정규화의 특징
- 2개 이상의 테이블에 동일 컬럼을 중복 배치하여, 조회 시간을 최적화
  - Join 연산이 줄어들어, 빠른 데이터 조회 가능
  - 데이터를 중복하여 저장하므로, 더 많은 저장공간이 필요
  - 데이터의 무결성 보장 X

## DB 반 정규화 고려 대상
- 대량의 범위를 자주 처리해야 하는 경우
- 특정 범위 또는 요약/집계 정보가 자주 요구되는 경우
- Join으로 인항 성능 저하가 예상되는 경우

### 테이블 수직 분할
- 하나의 테이블을 두개 이상의 테이블로 분할
- 자주 사용하는 컬럼을 기준으로 분리하여 성능 향상

### 테이블 수평 분할(파티셔닝)
- 파티션 기능을 사용해서 일자에 따라, 데이터를 물리적으로 분리
- 데이터 접근의 효율성을 높여 성능을 향상시키기 위해, **row 단위**로 테이블 분리

### 통계 테이블 추가
- 미리 계산된 값을 저장해 둠으로써, 어플리케이션 성능을 향상시키려는 경우

### 이력 테이블 추가
- Entity에 대한 이력 데이터를 관리하는 경우

### 파생 컬럼 추가
- 여러 테이블을 Join해서 얻을 수 있는 정보값이 자주 사용된다면, 미리 계산된 컬럼을 추가

### 중복 관계 추가
- 여러 경로를 거쳐 Join이 가능하지만, 성능 저하를 막기 위해 중복 관계 추가

## DB 정규화 vs 반 정규화
- 정답은 없다 상황에 맞게 선택하자
- 데이터의 일관성과 무결성이 중요하다 -> 정규화
- 성능과 운영 단순화가 중요하다 -> 반 정규화
